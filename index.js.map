{"version":3,"file":"index.js","sources":["../src/js/utils/consts.js","../src/js/pixabay-api.js","../src/js/services/izitoast.js","../src/js/render-functions.js","../src/js/services/simplelightbox.js","../src/js/services/scroll.js","../src/js/handlers/load-more.js","../src/js/handlers/form.js","../src/js/services/buttonService.js","../src/main.js"],"sourcesContent":["const refs = {\n  searchForm: document.querySelector('.js-form'),\n  searchInput: document.querySelector('.js-search-input'),\n  loader: document.querySelector('.js-loader'),\n  gallery: document.querySelector('.js-gallery'),\n  galleryCard: document.querySelector('.js-gallery-card'),\n  loadMoreBtn: document.querySelector('.js-load-more-btn'),\n};\n\nconst ACTIVE_CLASS = 'active';\n\nconst photoQueryParams = {\n  page: 1,\n  perPage: 15,\n  query: '',\n  maxPage: 1,\n};\n\n\nexport { refs, ACTIVE_CLASS, photoQueryParams };","import axios from 'axios';\nimport { photoQueryParams } from './utils/consts.js';\n\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49309172-5f8130b15ef3c43c70e2ee30a';\nconst IMAGE_TYPE = 'photo';\nconst ORIENTATION = 'horizontal';\nconst SAFESEARCH = 'true';\n\n\nasync function getImages(query) {\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: IMAGE_TYPE,\n    orientation: ORIENTATION,\n    safesearch: SAFESEARCH,\n    per_page: photoQueryParams.perPage,\n    page: photoQueryParams.page,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n\n  return response.data;\n}\n\n\nexport { getImages };","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst noFoundQuery = () => {\n  iziToast.error({\n    title: `❌ Please, enter a query!`,\n    message: '',\n    position: 'topRight',\n    color: 'red',\n    icon: '',\n  });\n};\n\nconst noFoundImages = () => {\n  iziToast.error({\n    title: `❌ Sorry, there are no images matching your search query. Please try again!`,\n    message: '',\n    position: 'topRight',\n    color: 'red',\n    icon: '',\n  });\n};\n\nconst endOfCollection = () => {\n  iziToast.info({\n    title: `We're sorry, but you've reached the end of search results.`,\n    message: '',\n    position: 'topRight',\n    color: 'blue',\n  });\n};\n\n\nexport { noFoundImages, noFoundQuery, endOfCollection };","function createCardsMarkup(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-card js-gallery-card\">\n      <a class=\"gallery-link js-gallery-link\" href=\"${largeImageURL}\">\n        <img\n        class=\"gallery-img\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\">\n        <div class=\"gallery-img-info\">\n          <ul class=\"gallery-img-info-card\">\n              <li class=\"info-card-title likes\">Likes</li>\n              <li class=\"info-card-value likes\">${likes}</li>\n          </ul>\n          <ul class=\"gallery-img-info-card\">\n              <li class=\"info-card-title likes\">Views</li>\n              <li class=\"info-card-value likes\">${views}</li>\n          </ul>\n          <ul class=\"gallery-img-info-card\">\n              <li class=\"info-card-title likes\">Comments</li>\n              <li class=\"info-card-value likes\">${comments}</li>\n          </ul>\n          <ul class=\"gallery-img-info-card\">\n              <li class=\"info-card-title likes\">Downloads</li>\n              <li class=\"info-card-value likes\">${downloads}</li>\n          </ul>\n        </div>\n      </a>\n    </li>`,\n    )\n    .join('');\n}\n\n\nexport { createCardsMarkup };","import SimpleLightbox from 'simplelightbox';\n\n\nconst lightBox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250});\n\n\nexport { lightBox }","function scroll() {\n\n  const galleryCard = document.querySelector('.js-gallery-card');\n\n  if (!galleryCard) {\n    console.log('No card yet');\n    return;\n  }\n\n  const cardHeight = galleryCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n\nexport { scroll };","import { ACTIVE_CLASS, photoQueryParams, refs } from '../utils/consts.js';\nimport { loadmoreButton } from '../../main.js';\nimport { getImages } from '../pixabay-api.js';\nimport { createCardsMarkup } from '../render-functions.js';\nimport { endOfCollection } from '../services/izitoast.js';\nimport { scroll } from '../services/scroll.js';\n\n\nasync function handleLoadMore() {\n  photoQueryParams.page += 1;\n  loadmoreButton.disable();\n  loadmoreButton.hide();\n  refs.loader.classList.add(ACTIVE_CLASS);\n\n  try {\n    const images = await getImages(photoQueryParams);\n\n    const markup = createCardsMarkup(images.hits);\n\n    refs.loader.classList.remove(ACTIVE_CLASS);\n\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    \n    scroll();\n\n    loadmoreButton.show();\n    loadmoreButton.enable();\n\n    //Перевірка на кінець колекції\n    if (photoQueryParams.page === photoQueryParams.maxPage) {\n      loadmoreButton.hide();\n      loadmoreButton.button.removeEventListener('click', handleLoadMore);\n      endOfCollection();\n    }\n\n  } catch (error) {\n    console.log(error);\n    loadmoreButton.hide();\n  }\n}\n\n\nexport { handleLoadMore };","import { getImages } from '../pixabay-api.js';\nimport { noFoundImages, noFoundQuery } from '../services/izitoast.js';\nimport { createCardsMarkup } from '../render-functions.js';\nimport { ACTIVE_CLASS, photoQueryParams, refs } from '../utils/consts.js';\nimport { lightBox } from '../services/simplelightbox.js';\nimport { loadmoreButton } from '../../main.js';\nimport { handleLoadMore } from './load-more.js';\nimport { scroll } from '../services/scroll.js';\n\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  // Скидання попередніх станів перед новим запитом\n  loadmoreButton.hide();\n  photoQueryParams.page = 1;\n  photoQueryParams.maxPage = 1;\n\n  const loader = refs.loader;\n  const form = event.currentTarget;\n  const userQuery = form.elements.user_query.value.trim();\n\n\n  if (!userQuery) {\n    return noFoundQuery();\n  }\n\n  loader.classList.add(ACTIVE_CLASS);\n  photoQueryParams.query = userQuery;\n\n  try {\n    const images = await getImages(userQuery);\n\n    loader.classList.remove(ACTIVE_CLASS);\n\n    photoQueryParams.maxPage = Math.ceil(images.total / images.hits.length);\n\n    if (!images.total) {\n      refs.gallery.innerHTML = '';\n      refs.loadMoreBtn.classList.remove(ACTIVE_CLASS);\n      return noFoundImages();\n    }\n\n    refs.gallery.innerHTML = createCardsMarkup(images.hits);\n    \n    scroll();\n\n    if (photoQueryParams.maxPage === 1) {\n      return;\n    }\n\n    loadmoreButton.show();\n    loadmoreButton.enable();\n    loadmoreButton.button.addEventListener('click', handleLoadMore);\n\n    lightBox.refresh();\n\n  } catch (error) {\n    loader.classList.remove(ACTIVE_CLASS);\n    console.log(error);\n\n  } finally {\n    form.reset();\n  }\n}\n\n\nexport { handleSearch };","export default class LoadMoreButton {\n  static HIDDEN_CLASS = 'is-hidden';\n\n  constructor(buttonEl) {\n    this.button = buttonEl;\n    this.prevText = '';\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.prevText = this.button.textContent;\n    this.button.textContent = 'Loading...';\n  }\n\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = this.prevText || this.button.textContent;\n  }\n\n  hide() {\n    this.button.classList.add(LoadMoreButton.HIDDEN_CLASS);\n  }\n\n  show() {\n    this.button.classList.remove(LoadMoreButton.HIDDEN_CLASS);\n  }\n\n}","import { refs } from './js/utils/consts.js';\nimport { handleSearch } from './js/handlers/form.js';\nimport LoadMoreButton from './js/services/buttonService.js';\n\n\nrefs.searchForm.addEventListener('submit', handleSearch);\n\nconst loadmoreButton = new LoadMoreButton(refs.loadMoreBtn);\n\n\nexport { loadmoreButton };"],"names":["refs","ACTIVE_CLASS","photoQueryParams","BASE_URL","API_KEY","IMAGE_TYPE","ORIENTATION","SAFESEARCH","getImages","query","params","axios","noFoundQuery","iziToast","noFoundImages","endOfCollection","createCardsMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightBox","SimpleLightbox","scroll","galleryCard","cardHeight","handleLoadMore","loadmoreButton","markup","error","handleSearch","event","loader","form","userQuery","_LoadMoreButton","buttonEl","__publicField","LoadMoreButton"],"mappings":"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"}